from llm_output import Llm_caller
from txt_to_pdf import Txt_to_PDF
from pdf_reader import Pdf_reader
from pdfminer.high_level import extract_text as pdfminer_extract_text
import io
import requests
call_module = Llm_caller()


# pdf_save = Txt_to_PDF()

# pd = Pdf_reader()

res_pdf = [
    r"C:\Users\Lead Soc\Downloads\Sunita_updated_resume (1).pdf",
    r"C:\Users\Lead Soc\Downloads\Sagnik Bhattacharya_Python Automation_Leadsoc.pdf",
    r"C:\Users\Lead Soc\Downloads\9-07-24 grievance.pdf",
    # r"C:\Users\Lead Soc\Downloads\Sunita_updated_resume (1).pdf",
    # r"C:\Users\Lead Soc\Downloads\Sunita_updated_resume (1).pdf",
    # r"C:\Users\Lead Soc\Downloads\Sunita_updated_resume (1).pdf"
    # "https://leadsochrms.s3.amazonaws.com/Resume/1706012040697",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1706007937038",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1706001080833",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705992109383",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705986064821",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705918983470",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705916738904",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705913042386",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705910746093",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705900253540",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705651101041",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705644901531",
    # "https://leadsochrms.s3.amazonaws.com/Resume/1705582283897"
]
res_data = ""
for index,each_resume in enumerate(res_pdf):
    print("*"*50)
    print(f"Starting {index+1} out of {len(res_pdf)}")
    # res_data = pd.get_pdf_text_from_url(each_resume)
    # response = requests.get(each_resume)
    # pdf_file = io.BytesIO(response.content)
    # pdf_file = (r"C:\Users\Lead Soc\Downloads\Sunita_updated_resume (1).pdf")
    res_data = pdfminer_extract_text(each_resume)
    # res_data += pdfminer_extract_text(pdf_file)
    # return text
    if res_data:
        pdf_data = call_module.send_api_req(res_data)
        with open(f'E:/resume-creator-llm-code-generation/resume-creator-llm-code-generation/{index+1}.txt','w+') as f:
           
            f.write(pdf_data)
        input_path = f'E:/resume-creator-llm-code-generation/resume-creator-llm-code-generation/{index+1}.txt'
        # input_path = f'{path}'
        # print(input_path)
        output_path = f'{index+1}.pdf'
        output_file = Txt_to_PDF.txt_to_pdf(input_path, output_path)


    print(f"Completed {index+1} out of {len(res_pdf)}")



def pdf_save():
    pass

















































































































































































































































































































































































































































































































































































































































































































































